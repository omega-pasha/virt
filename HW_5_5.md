# Домашнее задание к занятию "5.5. Оркестрация кластером Docker контейнеров на примере Docker Swarm"

## Задание 1
Дайте письменые ответы на следующие вопросы:

* В чём отличие режимов работы сервисов в Docker Swarm кластере: replication и global?
* Какой алгоритм выбора лидера используется в Docker Swarm кластере?
* Что такое Overlay Network?

## Ответ
 - Replication - мы указываем сколько экземпляров микросервисов нужно развернуть в кластере
 - Global - мы указываем кластеру, развернуть микросервис на всех нодах.
 
 Docker swarm использует алгоритм распределённого консенсуса Raft. Алгоритм работает так: Фоловер получает запросы от пользователей и перенаправляет
 их лидеру, в ответ он ждет от лидера его "сердцебиение", мол я твой лидер и я все ещё жив. Фоловер ждет от 150, до 300мс и если не получает от лидера его 
 "сердцебиения", то он решает - Король мёртв, да здравствует Король, и инициирует выборы. В этот момент он становится кондидатом. Если Кондидат получит 
 большинство голосов, то он становится новым лидером.
 
 Overlay-сеть это подсеть, которую могут использовать контейнеры в разных хостах swarm-кластера. Контейнеры на разных физических хостах могут 
 обмениваться данными по overlay-сети, если все они прикреплены к одной сети.

## Задание 2
Создать ваш первый Docker Swarm кластер в Яндекс.Облаке

## Ответ

https://disk.yandex.ru/i/4J9vEbILsTDyfA

https://disk.yandex.ru/i/_YTbiNMZdLMjzQ

## Задание 3
Создать ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.

## Ответ

https://disk.yandex.ru/i/bgp2yq-mxCchvQ

https://disk.yandex.ru/i/l-NmJM47FOyKZQ

https://disk.yandex.ru/i/LtnhTWO6Kog_GA

https://disk.yandex.ru/i/S9Au774yEW4HIg

## Задача 4
Выполнить на лидере Docker Swarm кластера команду docker swarm update --autolock=true и дать письменное описание её функционала, что она делает и зачем она нужна.

## Ответ

Это дополнительный ключ шифрования TLS, используемый для шифрования и дешифрования логов Raft. Когда Docker swarm перезапускается, мы должны сначала разблокировать кластер, используя ключ шифрования, который сгенерировал Docker. 
